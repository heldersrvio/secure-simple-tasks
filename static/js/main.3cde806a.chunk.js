(this["webpackJsonpsimple-tasks"]=this["webpackJsonpsimple-tasks"]||[]).push([[0],{136:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),s=n(43),c=n.n(s),u=(n(49),n(5)),i=n.n(u),o=n(8),l=n(9),j=(n(51),n(14)),p=n(15),b=(n(143),n(52),function(){p.a.initializeApp({apiKey:"AIzaSyBWkRBU1UeQsmoV2Ef8_ZUa34TIObUMeOE",authDomain:"simple-tasks-5d0fc.firebaseapp.com",projectId:"simple-tasks-5d0fc",storageBucket:"simple-tasks-5d0fc.appspot.com",messagingSenderId:"820423957853",appId:"1:820423957853:web:37e19e6a8a65999c561cb4"});var e=p.a.firestore(),t=function(){var t=Object(o.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.a.auth().currentUser.uid,t.next=3,e.collection("users").get();case 3:return t.abrupt("return",t.sent.docs.map((function(e){return Object(j.a)(Object(j.a)({},e.data()),{},{role:e.id===n?"admin":"user"})})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(o.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=p.a.auth().currentUser.uid)||void 0===n){t.next=7;break}return t.next=4,e.collection("users").doc(n).get();case 4:if(!(r=t.sent).exists){t.next=7;break}return t.abrupt("return",Object(j.a)({},r.data()));case 7:throw new Error("Username does not exist");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(o.a)(i.a.mark((function t(n,r,a,s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.auth().createUserWithEmailAndPassword(a,s);case 3:return c=t.sent,t.next=6,e.collection("users").doc(c.user.uid).set({userName:n,name:r,email:a,tasks:[]});case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),a=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.auth().signInWithEmailAndPassword(t,n);case 3:return r=e.sent,e.abrupt("return",r.user.uid);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.auth().signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var t=Object(o.a)(i.a.mark((function t(r,a){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(r);case 2:return s=t.sent.tasks,t.next=5,e.collection("users").doc(r).set({tasks:s.concat(a)},{merge:!0});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),u=function(){var t=Object(o.a)(i.a.mark((function t(r,a){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(r);case 2:return s=t.sent.tasks,t.next=5,e.collection("users").doc(r).set({tasks:s.filter((function(e,t){return t!==a}))},{merge:!0});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{getUsers:t,getUser:n,createUser:r,login:a,logout:s,addTask:c,deleteTask:u,getUserRole:function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection("roles").doc("admin").get();case 3:if(t.t0=t.sent.data().user,t.t1=n,t.t0!==t.t1){t.next=9;break}t.t2="admin",t.next=10;break;case 9:t.t2="user";case 10:return t.abrupt("return",t.t2);case 13:return t.prev=13,t.t3=t.catch(0),t.abrupt("return","user");case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}}()),d=(n(54),n(2)),f=function(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,b.getUsers();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsxs)("div",{className:"admin-page",children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("h1",{children:"Admin"}),Object(d.jsx)("button",{className:"logout-button",onClick:e.logout,children:"Sair"})]}),Object(d.jsx)("h2",{children:"Usu\xe1rios"}),a.map((function(t,n){return Object(d.jsx)("div",{className:"admin-user-item",onClick:function(n){return e.redirectToUserDetailPage(t)},children:Object(d.jsx)("span",{children:t.userName})},n)}))]})},h=(n(56),function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(""),u=Object(l.a)(c,2),j=u[0],p=u[1],b=Object(r.useState)(""),f=Object(l.a)(b,2),h=f[0],O=f[1],m=function(){var t=Object(o.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==a.length&&0!==j.length){t.next=4;break}O("Dados inv\xe1lidos"),t.next=8;break;case 4:return t.next=6,e.login(a,j);case 6:n=t.sent,O(n?"":"Dados inv\xe1lidos");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)("input",{type:"email",placeholder:"Email",value:a,onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("input",{type:"password",placeholder:"Senha",value:j,onChange:function(e){return p(e.target.value)}}),Object(d.jsx)("span",{className:"login-error-span",children:h}),Object(d.jsx)("button",{onClick:function(e){return m()},className:"enter-button",children:"Entrar"}),Object(d.jsx)("button",{onClick:function(t){return e.redirectToSignUp()},className:"not-a-user-button",children:"Ainda n\xe3o tenho cadastro"})]})}),O=n(44),m=n.n(O),x=(n(57),function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(""),u=Object(l.a)(c,2),j=u[0],p=u[1],b=Object(r.useState)(""),f=Object(l.a)(b,2),h=f[0],O=f[1],x=Object(r.useState)(""),v=Object(l.a)(x,2),g=v[0],k=v[1],w=Object(r.useState)(""),N=Object(l.a)(w,2),S=N[0],y=N[1],U=Object(r.useState)(""),C=Object(l.a)(U,2),I=C[0],T=C[1],E=Object(r.useState)(!1),A=Object(l.a)(E,2),P=A[0],z=A[1],D=function(){var t=Object(o.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(![j,a,h,g,S].some((function(e){return 0===e.length}))){t.next=4;break}T("Preencha todos os dados"),t.next=17;break;case 4:if(g===S){t.next=8;break}T("Senhas n\xe3o batem"),t.next=17;break;case 8:if(r=g,m.a.isStrongPassword(r,{minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:0})){t.next=12;break}T("Senha n\xe3o \xe9 forte o suficiente \u2014 deve conter pelo menos 8 caracteres, 1 letra min\xfascula, 1 letra mai\xfascula e 1 n\xfamero"),t.next=17;break;case 12:return t.next=14,e.signUp(j,a,h,g);case 14:n=t.sent,T(n?"":"Usu\xe1rio j\xe1 existe"),z(n);case 17:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}();return P?Object(d.jsxs)("div",{className:"sign-up",children:[Object(d.jsx)("span",{className:"sign-up-successful-span",children:"Usu\xe1rio cadastrado com sucesso"}),Object(d.jsx)("button",{onClick:function(t){return e.redirectToLogin()},children:"Fazer login"})]}):Object(d.jsxs)("div",{className:"sign-up",children:[Object(d.jsx)("input",{className:"name-input",type:"text",placeholder:"Nome",value:a,onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"Nome de usu\xe1rio",value:j,onChange:function(e){return p(e.target.value)}}),Object(d.jsx)("input",{type:"email",placeholder:"E-mail",value:h,onChange:function(e){return O(e.target.value)}}),Object(d.jsx)("input",{type:"password",placeholder:"Senha",value:g,onChange:function(e){return k(e.target.value)}}),Object(d.jsx)("input",{type:"password",placeholder:"Confirme a senha",value:S,onChange:function(e){return y(e.target.value)}}),Object(d.jsx)("span",{className:"sign-up-error-span",children:I}),Object(d.jsx)("button",{onClick:D,children:"Cadastrar-se"})]})}),v=(n(136),n(20)),g=function(e){return Object(d.jsxs)("div",{className:"user-detail-page",children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("button",{className:"back-button",onClick:e.back,children:Object(d.jsx)(v.a,{icon:"arrow-left"})}),Object(d.jsx)("h1",{children:e.userInfo.userName})]}),Object(d.jsxs)("div",{className:"user-info-section",children:[Object(d.jsxs)("div",{className:"user-info-name-section",children:[Object(d.jsx)("label",{htmlFor:"name",children:"Nome: "}),Object(d.jsx)("span",{children:e.userInfo.name})]}),Object(d.jsxs)("div",{className:"user-info-email-section",children:[Object(d.jsx)("label",{htmlFor:"email",children:"E-mail: "}),Object(d.jsx)("span",{children:e.userInfo.email})]}),Object(d.jsxs)("div",{className:"user-info-role-section",children:[Object(d.jsx)("label",{htmlFor:"role",children:"Privil\xe9gios: "}),Object(d.jsx)("span",{children:"admin"===e.userInfo.role?"Administrador":"Usu\xe1rio"})]}),Object(d.jsxs)("div",{className:"user-info-tasks-section ",children:[Object(d.jsx)("label",{htmlFor:"tasks",children:"Tarefas: "}),Object(d.jsx)("ul",{children:e.userInfo.tasks.map((function(e,t){return Object(d.jsx)("li",{className:"user-info-task-item",children:Object(d.jsx)("span",{children:e})},t)}))})]})]})]})},k=(n(141),function(e){var t=Object(r.useState)(null),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(!1),u=Object(l.a)(c,2),p=u[0],f=u[1],h=Object(r.useState)(""),O=Object(l.a)(h,2),m=O[0],x=O[1];Object(r.useEffect)((function(){(function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,b.getUser(e.user);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.user]);var g=function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.deleteTask(e.user,n);case 2:s((function(e){return Object(j.a)(Object(j.a)({},e),{},{tasks:e.tasks.filter((function(e,t){return t!==n}))})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.addTask(e.user,m);case 2:s((function(e){return Object(j.a)(Object(j.a)({},e),{},{tasks:e.tasks.concat(m)})})),x(""),f(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=Object(d.jsxs)("div",{className:"add-task-section",children:[Object(d.jsx)("input",{type:"text",className:"add-new-task-input",value:m,onChange:function(e){return x(e.target.value)}}),Object(d.jsx)("button",{onClick:k,children:"Adicionar"})]}),N=null!==a?Object(d.jsxs)("div",{className:"tasks-section",children:[Object(d.jsx)("h2",{children:"Tarefas"}),a.tasks.map((function(e,t){return Object(d.jsxs)("div",{className:"task",children:[Object(d.jsx)("span",{children:e}),Object(d.jsx)("button",{className:"delete-task-button",onClick:function(e){return g(t)},children:Object(d.jsx)(v.a,{icon:"trash-alt",color:"black",size:"lg"})})]},t)})),p?w:Object(d.jsx)("button",{className:"add-task-button",onClick:function(e){return f(!0)},children:Object(d.jsx)(v.a,{icon:"plus-circle",color:"white",size:"lg"})})]}):null;return Object(d.jsxs)("div",{className:"user-page",children:[null!==a?Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("h1",{className:"user-page-header",children:a.name}),Object(d.jsx)("button",{className:"logout-button",onClick:e.logout,children:"Sair"})]}):null,N]})}),w=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("login"),c=Object(l.a)(s,2),u=c[0],j=c[1],p=Object(r.useState)(null),O=Object(l.a)(p,2),m=O[0],v=O[1],w=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.login(t,n);case 2:if(!1===(r=e.sent)){e.next=10;break}return e.next=6,b.getUserRole(r);case 6:return s=e.sent,a(r),j("admin"!==s?"user-page":"admin-page"),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.createUser(t,n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),S=function(){b.logout(),j("login"),a(null)};return Object(d.jsx)("div",{className:"App",children:"login"===u?Object(d.jsx)(h,{login:w,redirectToSignUp:function(){j("sign-up")}}):"sign-up"===u?Object(d.jsx)(x,{signUp:N,redirectToLogin:function(){j("login")}}):"user-page"===u?Object(d.jsx)(k,{user:n,logout:S}):"admin-page"===u?Object(d.jsx)(f,{redirectToUserDetailPage:function(e){v(e),j("user-detail-page")},logout:S}):Object(d.jsx)(g,{userInfo:m,back:function(){j("admin-page")}})})},N=n(16),S=n(21);N.b.add(S.d,S.b,S.c,S.a),c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root"))},49:function(e,t,n){},51:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){}},[[142,1,2]]]);
//# sourceMappingURL=main.3cde806a.chunk.js.map